<!--
  Generated template for the UpdateEmailPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->

<ion-content no-padding>
  <ion-grid no-padding>
    <ion-row class="email-header">
      <ion-col col-1>
        <button (click)="popView()" class="backButton">
          <ion-icon ios="md-close" md="md-close"></ion-icon>
        </button>
      </ion-col>
      <ion-col col-11>
        <ion-title text-left>UPDATE EMAIL ADDRESS</ion-title>
      </ion-col>
    </ion-row>

    <form [formGroup]="emailValidateForm" (ngSubmit)="onSubmit(emailValidateForm)">
      <ion-row class="label-row">
        <ion-col>
          <ion-list class="email-validate-item" no-lines>
            <ion-item no-padding class="email-item">
              <ion-label color="main-text-color" stacked>PRIMARY EMAIL</ion-label>
              <ion-input type="email" [(ngModel)]="primaryEmail" placeholder="{{primaryEmail}}" formControlName="primaryemail" name="primaryemail" clearInput="true"></ion-input>
            </ion-item>
          </ion-list>
        </ion-col>
      </ion-row>
      <p class="email-validate" [ngClass]="{'email-validate-show':emailValidateForm.get('primaryemail').hasError('required') && emailValidateForm.get('primaryemail').dirty}">
        Please enter a valid email address
      </p>
      <ion-row class="label-row">
        <ion-col>
          <ion-list class="email-validate-item" no-lines>
            <ion-item no-padding class="email-item">
              <ion-label color="main-text-color" stacked>SECONDARY EMAIL (OPTIONAL)</ion-label>
              <ion-input type="email" [(ngModel)]="secondaryEmail" placeholder="{{secondaryEmail}}" formControlName="secondaryemail" name="secondaryemail" clearInput="true" [disabled]="!emailValidateForm.controls.primaryemail.valid" (blur)="onBlurMethod()"></ion-input>
            </ion-item>
          </ion-list>
        </ion-col>
      </ion-row>
    </form>
    <p class="email-validate" *ngIf="display && emailValidateForm.controls.secondaryemail.dirty && emailValidateForm.get('secondaryemail').hasError('pattern')">
      Email is invalid!
    </p>
    <ion-row class="email-update-button">
      <ion-col col-1></ion-col>
      <ion-col col-10>
        <div>
          <button class="update-button" color="main-text-color" ion-button block [disabled]="!emailValidateForm.controls.primaryemail.valid && emailValidateForm.controls.primaryemail.dirty || !emailValidateForm.controls.secondaryemail.valid" (click)="goContactInfoPage()">UPDATE EMAIL ADDRESSES</button>
        </div>
      </ion-col>
      <ion-col col-1></ion-col>
    </ion-row>
  </ion-grid>
</ion-content>
